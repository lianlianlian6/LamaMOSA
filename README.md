# LamaMOSA

Improving DynaMOSA with Initial Population Generated by Pre-trained Large Language models
LamaMOSA is built on top of DynaMOSA in Pynguin 0.39.0

## Main Files

1. **`src/pynguin/analyses/LLMforseeding.py`**: 
   - Uses APIs to generate initial test cases for the unit under test through GPT series models.
   - Processes the generated test cases using ASTP and outputs available initial Python files to the `ini_test` folder within the project directory.
   - Counts the total number of generated test cases, the number of parsable test cases before and after ASTP processing, and saves these statistics in the `LLM_output.csv` file in the `ini_test` folder.

2. **`src/pynguin/analyses/astforcall.py`**: 
   - Processes unparseable test cases and attempts to convert them into parseable test cases.

3. **`src/pynguin/initial_coverage/initial_cov.py`**: 
   - Calculates the initial coverage and saves the results in the `LLM_initial_cov.csv` file within the `ini_test` folder.

4. **`LLMforseeding_test.py`, `initial_cov_test.py`, `main_pynguin_test.py`**: 
   - Provide batch processing methods corresponding to the files mentioned above.

## Usage

### 1. Run `LLMforseeding.py` to Generate Initial Test Cases
- **Inputs**: Project path, unit under test name, test case output path, unit under test path.
- **Example Command**:
  ```bash
  python yourpath\LamaMOSA\src\pynguin\analyses\LLMforseeding.py --project_path yourpath\project --module_name module1 --output_path yourpath\project\test --module_path yourpath\project\module1.py
  ```

### 2. Run `main.py` to Process the Initial Test Cases
- **Inputs**: Project path, unit under test name, test case output path, initial population path.
- **Example Command**:
  ```bash
  python yourpath\LamaMOSA\src\main.py --project_path yourpath\project --module_name module1 --output_path yourpath\project\test --initial_population_data yourpath\project\ini_test
  ```

### 3. Run `initial_cov.py` to Calculate Initial Coverage
- **Inputs**: Project path, unit under test name, test case output path, initial population path.
- **Example Command**:
  ```bash
  python yourpath\LamaMOSA\src\pynguin\initial_coverage\initial_cov.py --project_path yourpath\project --module_name module1 --output_path yourpath\project\test --initial_population_data yourpath\project\ini_test
  ```

### 4. Batch Processing for Multiple Units Under Test
- Use `LLMforseeding_test.py`, `initial_cov_test.py`, or `main_pynguin_test.py` for batch processing of multiple units under test.
- You will need to manually update the `python_executable`, `directory`, and `test_directory` parameters in the code before running these scripts.


## Contributing
Make sure your Python version meets the project requirements (>=3.10, <3.11).

1.Clone the repository

2.Change to the LamaMOSA folder: `cd LamaMOSA`

3.Create a virtual environment and install dependencies using poetry: `poetry install`

4.Make your changes

5.Run `make check` to verify that your changes pass all checks

## License

This project is licensed under the [MIT License](LICENSE). Feel free to use it.
